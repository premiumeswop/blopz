!function(e,t,n,i){let l=e(".aheto-timeline--moovit-modern"),r=100;function s(e,t,n){const i=d(e.eventsWrapper),l=Number(e.timelineWrapper.css("width").replace("px",""));"next"==n?o(e,i-l+r,l-t):o(e,i+l-r)}function a(e,n,i){const l=e.eventsContent.find(".selected");if(("next"==i?l.next():l.prev()).length>0){const l=e.eventsWrapper.find(".selected"),r="next"==i?l.parent("li").next("li").children("a"):l.parent("li").prev("li").children("a");c(r,e.fillingLine,n),f(r,e.eventsContent),r.addClass("selected"),l.removeClass("selected"),p(r),function(e,n,i,l){const r=t.getComputedStyle(n.get(0),null),s=Number(r.getPropertyValue("left").replace("px","")),a=Number(i.timelineWrapper.css("width").replace("px",""));l=Number(i.eventsWrapper.css("width").replace("px",""));const c=d(i.eventsWrapper);("next"==e&&s>a-c||"prev"==e&&s<-c)&&o(i,a/2-s,a-l)}(i,r,e,n)}}function o(e,t,n){t=t>0?0:t,m(e.eventsWrapper.get(0),"translateX",(t=void 0!==n&&t<n?n:t)+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==n?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function c(e,n,i){const l=t.getComputedStyle(e.get(0),null);let r=l.getPropertyValue("left");const s=l.getPropertyValue("width"),a=(r=Number(r.replace("px",""))+Number(s.replace("px",""))/2)/i;m(n.get(0),"scaleX",a)}function f(e,t){const n=e.data("date"),i=t.find(".selected"),l=t.find('[data-date="'+n+'"]'),r=l.height();let s,a;l.index()>i.index()?(s="selected enter-right",a="leave-left"):(s="selected enter-left",a="leave-right"),l.attr("class",s),i.attr("class",a).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){i.removeClass("leave-right leave-left"),l.removeClass("enter-left enter-right")}),t.css("height",r+"px")}function p(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function d(e){const n=t.getComputedStyle(e.get(0),null);let i=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform"),l=0;return i.indexOf("(")>=0&&(l=(i=(i=(i=i.split("(")[1]).split(")")[0]).split(","))[4]),Number(l)}function m(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}function u(e,t){return Math.round(t-e)}function v(e){let n=e.offsetTop,i=e.offsetLeft,l=e.offsetWidth,r=e.offsetHeight;for(;e.offsetParent;)n+=(e=e.offsetParent).offsetTop,i+=e.offsetLeft;return n<t.pageYOffset+t.innerHeight&&i<t.pageXOffset+t.innerWidth&&n+r>t.pageYOffset&&i+l>t.pageXOffset}function h(){return t.getComputedStyle(n.querySelector(".aheto-timeline--moovit-modern"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}l.length>0&&function(i){i.each(function(){const i=e(this),l={};l.timelineWrapper=i.find(".aheto-timeline__events-wrapper"),l.eventsWrapper=l.timelineWrapper.children(".aheto-timeline__events"),l.fillingLine=l.eventsWrapper.children(".aheto-timeline__filling-line"),l.timelineEvents=l.eventsWrapper.find("a"),l.timelineDates=function(t){const n=[];return t.each(function(t){const i=e(this).data("date");var l=new Date(i);l=isNaN(l)?t+1:l,n.push(l)}),n}(l.timelineEvents),l.eventsMinLapse=function(e){const t=[];for(let n=1;n<e.length;n++){const i=u(e[n-1],e[n]);t.push(i)}return Math.min.apply(null,t)}(l.timelineDates),l.timelineNavigation=i.find(".aheto-timeline__navigation"),l.eventsContent=i.children(".aheto-timeline__events-content"),function(e,t){for(let n=0;n<e.timelineDates.length;n++){const i=u(e.timelineDates[0],e.timelineDates[n]),l=Math.round(i/e.eventsMinLapse)+2;e.timelineEvents.eq(n).css("left",l*t+"px")}}(l,r);const o=function(e,t){let n=u(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1])/e.eventsMinLapse;const i=(n=Math.round(n)+4)*t;return e.eventsWrapper.css("width",i+"px"),c(e.timelineEvents.eq(0),e.fillingLine,i),i}(l,r);i.addClass("loaded"),e(t).on("resize orientationchange",function(){const e=l.eventsWrapper.find("li").last().find("a");e.hasClass("selected")&&s(l,o,"next")}),l.timelineNavigation.on("click",".next",function(e){e.preventDefault(),s(l,o,"next")}),l.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),s(l,o,"prev")}),l.eventsWrapper.on("click","a",function(t){t.preventDefault(),l.timelineEvents.removeClass("selected"),e(this).addClass("selected"),p(e(this)),c(e(this),l.fillingLine,o),f(e(this),l.eventsContent)}),l.eventsContent.on("swipeleft",function(){const e=h();"mobile"==e&&a(l,o,"next")}),l.eventsContent.on("swiperight",function(){const e=h();"mobile"==e&&a(l,o,"prev")}),e(n).keyup(function(e){"37"==e.which&&v(i.get(0))?a(l,o,"prev"):"39"==e.which&&v(i.get(0))&&a(l,o,"next")})})}(l)}(jQuery,window,document);